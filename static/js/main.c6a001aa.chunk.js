(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(21)},19:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(7),i=a.n(r),l=a(4),s=a(1),o=a(2),u=a.n(o),m=a(3),d=a.n(m),E=(a(18),a(8)),p=a(9),f=a(11),b=a(10),O=a(12),S=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).state={error:!1},a}return Object(O.a)(t,e),Object(p.a)(t,[{key:"componentDidCatch",value:function(e){throw e}},{key:"render",value:function(){return this.state.error?(c.a.createElement("div",null,"there was an error"),this.props.children):this.props.children}}]),t}(c.a.Component);var h=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],i=a[1],l=Object(n.useState)("NOT_ASKED"),o=Object(s.a)(l,2),m=o[0],d=o[1],E=Object(n.useState)(e.expandTracks),p=Object(s.a)(E,2),f=(p[0],p[1],function(){d("PENDING"),(new u.a).getPlaylistTracks(e.playlist.id).then(function(e,t){t?d("ERROR"):(d("SUCCESS"),i(e.items))})});return e.expandTracks&&"NOT_ASKED"===m&&f(),c.a.createElement("section",null,c.a.createElement("h2",null,e.playlist.name),c.a.createElement("div",null,c.a.createElement("span",{className:"uri"},"URI: ",e.playlist.uri),c.a.createElement("iframe",{title:e.playlist.name,src:"https://open.spotify.com/embed/playlist/".concat(e.playlist.id),width:"300",height:"380",frameBorder:"0",allowtransparency:"true",allow:"encrypted-media"}),c.a.createElement("div",{className:"tracks"},function(){switch(m){case"NOT_ASKED":return c.a.createElement("button",{className:"button",onClick:f},"Expand tracks");case"PENDING":return c.a.createElement("div",null,"Loading tracks...");case"SUCCESS":return r.map(function(e){var t=e.track;return c.a.createElement("div",{key:t.id,className:"trackContainer"},c.a.createElement("p",null," ","".concat(t.name," by ").concat(function(e){return e.artists.map(function(e,t){return e.name})}(t)," from ").concat(t.album.name)," "))})}}())))},j=(a(19),"jon.trainor"),y="0b71959111884567b4530208b9f5add7",v="jontrainor-spotify-playlist";var w=function(){var e=Object(n.useState)(void 0),t=Object(s.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)("NOT_ASKED"),o=Object(s.a)(i,2),m=o[0],E=o[1],p=Object(n.useState)("NOT_ASKED"),f=Object(s.a)(p,2),b=f[0],O=f[1],w=Object(n.useState)(0),k=Object(s.a)(w,2),N=k[0],C=k[1],R=Object(n.useState)([]),D=Object(s.a)(R,2),T=D[0],_=D[1];return Object(n.useEffect)(function(){var e=d.a.get(v),t=new u.a,a=new URLSearchParams(window.location.hash.slice(1)).get("access_token");a?(t.setAccessToken(a),r(a),d.a.set(v,a)):e&&(r(e),t.setAccessToken(e))},[window.location.hash]),Object(n.useEffect)(function(){var e,t=/^20\d\d\.\d\d\.\d\d$/;a&&"PENDING"!==b&&null!==N&&(O("PENDING"),E("PENDING"),(e=N,(new u.a).getUserPlaylists(j,{limit:50,offset:e})).then(function(e,a){if(a)O("ERROR"),E("ERROR");else{O("SUCCESS");var n=e.items.filter(function(e){return t.test(e.name)});_([].concat(Object(l.a)(T),Object(l.a)(n))),e.next?C(N+e.limit):(C(null),E("SUCCESS"))}}).catch(function(e){401===e.status&&(d.a.remove(v),r(void 0),E("NOT_ASKED"))}))},[j,a,N]),c.a.createElement(S,null,a?function(){switch(m){case"NOT_ASKED":return c.a.createElement("div",null,"loading");case"ERROR":return c.a.createElement("div",null,"error");case"SUCCESS":return c.a.createElement("main",null,c.a.createElement("h1",null,"Weekly Playlists"),T.map(function(e,t){return c.a.createElement(h,{key:e.id,playlist:e,expandTracks:0===t})}));default:return c.a.createElement("noscript",null)}}():c.a.createElement("button",{className:"button",onClick:function(){var e=encodeURI("http://jontrainor.com/mixtapes");window.location="https://accounts.spotify.com/authorize?response_type=token&client_id=".concat(y,"&redirect_uri=").concat(e)}},"Log in to Spotify"))};a(20);i.a.render(c.a.createElement(w,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.c6a001aa.chunk.js.map