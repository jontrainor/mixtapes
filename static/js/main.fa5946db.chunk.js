(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(21)},19:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(7),l=a.n(r),i=a(4),o=a(1),s=a(2),u=a.n(s),m=a(3),d=a.n(m),E=(a(18),a(8)),p=a(9),f=a(11),b=a(10),O=a(12),h=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).state={error:!1},a}return Object(O.a)(t,e),Object(p.a)(t,[{key:"componentDidCatch",value:function(e){throw e}},{key:"render",value:function(){return this.state.error?(c.a.createElement("div",null,"there was an error"),this.props.children):this.props.children}}]),t}(c.a.Component);var S=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)("NOT_ASKED"),s=Object(o.a)(i,2),m=s[0],d=s[1],E=function(){d("PENDING"),(new u.a).getPlaylistTracks(e.playlist.id).then(function(e,t){t?d("ERROR"):(d("SUCCESS"),l(e.items))})};return e.expandTracks&&"NOT_ASKED"===m&&E(),c.a.createElement("section",null,c.a.createElement("h2",null,e.playlist.name),c.a.createElement("div",null,c.a.createElement("span",{className:"uri"},"URI: ",e.playlist.uri),c.a.createElement("iframe",{title:e.playlist.name,src:"https://open.spotify.com/embed/playlist/".concat(e.playlist.id),width:"300",height:"380",frameBorder:"0",allowtransparency:"true",allow:"encrypted-media"}),c.a.createElement("div",{className:"tracks"},function(){switch(m){case"NOT_ASKED":return c.a.createElement("button",{className:"button",onClick:E},"Expand tracks");case"PENDING":return c.a.createElement("div",null,"Loading tracks...");case"SUCCESS":return r.map(function(e){var t=e.track;return c.a.createElement("div",{key:t.id,className:"trackContainer"},c.a.createElement("p",null," ","".concat(t.name," by ").concat(function(e){return e.artists.map(function(e,t){return e.name})}(t)," from ").concat(t.album.name," (").concat(t.album.release_date.split("-")[0],")")," "))});default:return null}}())))},j=(a(19),"jon.trainor"),y="0b71959111884567b4530208b9f5add7",v="jontrainor-spotify-playlist";var w=function(){var e=Object(n.useState)(void 0),t=Object(o.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)("NOT_ASKED"),s=Object(o.a)(l,2),m=s[0],E=s[1],p=Object(n.useState)("NOT_ASKED"),f=Object(o.a)(p,2),b=f[0],O=f[1],w=Object(n.useState)(0),N=Object(o.a)(w,2),k=N[0],C=N[1],R=Object(n.useState)([]),D=Object(o.a)(R,2),T=D[0],_=D[1];return Object(n.useEffect)(function(){var e=d.a.get(v),t=new u.a,a=new URLSearchParams(window.location.hash.slice(1)).get("access_token");a?(t.setAccessToken(a),r(a),d.a.set(v,a)):e&&(r(e),t.setAccessToken(e))},[window.location.hash]),Object(n.useEffect)(function(){var e,t=/^20\d\d\.\d\d\.\d\d$/;a&&"PENDING"!==b&&null!==k&&(O("PENDING"),E("PENDING"),(e=k,(new u.a).getUserPlaylists(j,{limit:50,offset:e})).then(function(e,a){if(a)O("ERROR"),E("ERROR");else{O("SUCCESS");var n=e.items.filter(function(e){return t.test(e.name)});_([].concat(Object(i.a)(T),Object(i.a)(n))),e.next?C(k+e.limit):(C(null),E("SUCCESS"))}}).catch(function(e){401===e.status&&(d.a.remove(v),r(void 0),E("NOT_ASKED"))}))},[j,a,k]),c.a.createElement(h,null,a?function(){switch(m){case"NOT_ASKED":return c.a.createElement("div",null,"loading");case"ERROR":return c.a.createElement("div",null,"error");case"SUCCESS":return c.a.createElement("main",null,c.a.createElement("h1",null,"Weekly Playlists"),T.map(function(e,t){return c.a.createElement(S,{key:e.id,playlist:e,expandTracks:0===t})}));default:return c.a.createElement("noscript",null)}}():c.a.createElement("button",{className:"button",onClick:function(){var e=encodeURI("http://jontrainor.com/mixtapes");window.location="https://accounts.spotify.com/authorize?response_type=token&client_id=".concat(y,"&redirect_uri=").concat(e)}},"Log in to Spotify"))};a(20);l.a.render(c.a.createElement(w,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.fa5946db.chunk.js.map